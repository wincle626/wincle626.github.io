
---
layout: default
---

{% include base_path %}

{%- comment -%}
Hero/header image handling (same as single)
{%- endcomment -%}
{% if page.header.overlay_color or page.header.overlay_image or page.header.image %}
  {% include page__hero.html %}
{% endif %}

{%- comment -%}
Breadcrumbs (respects site.breadcrumbs)
{%- endcomment -%}
{% if page.url != "/" and site.breadcrumbs %}
  {% unless paginator %}
    {% include breadcrumbs.html %}
  {% endunless %}
{% endif %}

<div id="main" role="main">
  {% include sidebar.html %}

  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    {% if page.title %}
      <meta itemprop="headline" content="{{ page.title | markdownify | strip_html | strip_newlines | escape_once }}">
    {% endif %}
    {% if page.excerpt %}
      <meta itemprop="description" content="{{ page.excerpt | markdownify | strip_html | strip_newlines | escape_once }}">
    {% endif %}
    {% if page.date %}
      <meta itemprop="datePublished" content="{{ page.date | date: "%B %d, %Y" }}">
    {% endif %}
    {% if page.modified %}
      <meta itemprop="dateModified" content="{{ page.modified | date: "%B %d, %Y" }}">
    {% endif %}

    <div class="page__inner-wrap">
      {% unless page.header.overlay_color or page.header.overlay_image %}
        <header>
          {% if page.title %}
            <h1 class="page__title" itemprop="headline">{{ page.title | markdownify | remove: "<p>" | remove: "</p>" }}</h1>
          {% endif %}

          {%- comment -%}
          Show a compact news meta line: date • (optional author) • (optional location)
          {%- endcomment -%}
          {% if page.date or page.author or page.location %}
            <p class="page__date">
              <strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i>
                {{ site.data.ui-text[site.locale].date_label | default: "Published:" }}
              </strong>
              {% if page.date %}
                <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%B %d, %Y" }}</time>
              {% endif %}
              {% if page.author %} • <span itemprop="author">{{ page.author }}</span>{% endif %}
              {% if page.location %} • <span>{{ page.location }}</span>{% endif %}
            </p>
          {% endif %}
        </header>
      {% endunless %}

      <section class="page__content" itemprop="text">
        {{ content }}
      </section>

      <footer class="page__meta">
        {% if site.data.ui-text[site.locale].meta_label %}
          <h4 class="page__meta-title">{{ site.data.ui-text[site.locale].meta_label }}</h4>
        {% endif %}
        {%- comment -%}
        Reuse taxonomy include if you tag news items (e.g., tags: [award, lab])
        {%- endcomment -%}
        {% include page__taxonomy.html %}
      </footer>

      {%- comment -%}
      Inline previous/next pagination within the "news" collection
      (avoids using post_pagination.html which is post-centric).
      Sorted newest → oldest.
      {%- endcomment -%}
      {% assign _items = site.news | sort: "date" | reverse %}
      {% assign _prev = nil %}
      {% assign _next = nil %}

      {% for d in _items %}
        {% if d.url == page.url %}
          {% assign _idx = forloop.index0 %}
          {% if _idx > 0 %}
            {% assign _prev_index = _idx | minus: 1 %}
            {% assign _prev = _items[_prev_index] %}
          {% endif %}
          {% assign _next = _items[forloop.index] %} {# next item in the list #}
        {% endif %}
      {% endfor %}

      <nav class="pagination" role="navigation" aria-label="News Pagination" style="margin-top:1.25rem">
        {% if _prev %}
          <a class="pagination--pager" href="{{ _prev.url | relative_url }}" title="{{ _prev.title }}">&laquo; {{ site.data.ui-text[site.locale].previous_label | default: "Previous" }}</a>
        {% else %}
          <span class="pagination--pager disabled">&laquo; {{ site.data.ui-text[site.locale].previous_label | default: "Previous" }}</span>
        {% endif %}

        {% if _next %}
          <a class="pagination--pager" href="{{ _next.url | relative_url }}" title="{{ _next.title }}">{{ site.data.ui-text[site.locale].next_label | default: "Next" }} &raquo;</a>
        {% else %}
          <span class="pagination--pager disabled">{{ site.data.ui-text[site.locale].next_label | default: "Next" }} &raquo;</span>
        {% endif %}
      </nav>

      {%- comment -%}
      Optional sharing/comments, reusing your site's existing includes/flags
      {%- endcomment -%}
      {% if page.share %}{% include social-share.html %}{% endif %}
      {% if site.comments.provider and page.comments %}
        {% include comments.html %}
      {% endif %}
    </div>
  </article>

  {%- comment -%}
  Optional related items: if you want to surface other news items.
  Remove this block if not needed.
  {%- endcomment -%}
  {% assign _related = site.news | sort: "date" | reverse | where_exp: "it", "it.url != page.url" | slice: 0, 4 %}
  {% if _related and _related.size > 0 %}
    <div class="page__related">
      {% if site.data.ui-text[site.locale].related_label %}
        <h4 class="page__related-title">{{ site.data.ui-text[site.locale].related_label | default: "You May Also Enjoy" }}</h4>
      {% endif %}
      <div class="grid__wrapper">
        {% for item in _related %}
          {% include archive-single.html type="grid" post=item %}
        {% endfor %}
      </div>
    </div>
  {% endif %}
</div>
